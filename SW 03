# Best Time to Buy and Sell Stock using Strategy :-

def maxProfit(self, prices: List[int], strategy: List[int], k: int) -> int:
        n = len(prices)

        # Base profit
        base = sum(strategy[i] * prices[i] for i in range(n))

        # Prepare helper arrays
        A = [strategy[i] * prices[i] for i in range(n)]
        B = [(1 - strategy[i]) * prices[i] for i in range(n)]

        # Prefix sums
        preA = [0] * (n + 1)
        preB = [0] * (n + 1)

        for i in range(n):
            preA[i + 1] = preA[i] + A[i]
            preB[i + 1] = preB[i] + B[i]

        half = k // 2
        best_delta = 0  # we can choose not to modify

        for l in range(n - k + 1):
            # First half becomes 0
            loss = preA[l + half] - preA[l]

            # Second half becomes 1
            gain = preB[l + k] - preB[l + half]

            delta = -loss + gain
            best_delta = max(best_delta, delta)

        return base + best_delta
